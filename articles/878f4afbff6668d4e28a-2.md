---
title: "JSã®ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–å¯¾å¿œã‚’resizeã‹ã‚‰matchMediaã«ç§»è¡Œã—ãŸ"
emoji: "ğŸ“Œ"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["JavaScript"]
published: true
---

JS ã§ãƒ–ãƒ¬ãƒ¼ã‚¯ãƒã‚¤ãƒ³ãƒˆæ¯ã«å‡¦ç†ã‚’åˆ†ã‘ã‚‹å ´åˆã®æ–¹æ³•ã‚’ resize ã‹ã‚‰ matchMedia ã«ç§»è¡Œã—ãŸã®ã§ã€ãã®éš›ã®ãƒ¡ãƒ¢æ›¸ãã§ã™ã€‚

## æ˜”ãªãŒã‚‰ã®æ–¹æ³•

æ¥ãšã‹ã—ãªãŒã‚‰ã€æœ€è¿‘ã¾ã§ JS ã§ãƒ–ãƒ¬ãƒ¼ã‚¯ãƒã‚¤ãƒ³ãƒˆæ¯ã« JS å‡¦ç†ã‚’åˆ‡ã‚Šæ›¿ãˆã‚‹å ´åˆã€
ä»¥ä¸‹ã®ã‚ˆã†ã«æ˜”ãªãŒã‚‰ã® resize ã‚¤ãƒ™ãƒ³ãƒˆã®ç›£è¦–ã‚’ä½¿ã£ã¦ã„ã¾ã—ãŸ...

```javascript:æ˜”ãªãŒã‚‰ã®æ–¹æ³•
/**
 * ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼
 */
const listener = () => {
  // ãƒªã‚µã‚¤ã‚ºæ™‚ã«è¡Œã†å‡¦ç†

  if (window.innerWidth >= 768) {
    // 768pxä»¥ä¸Š
    console.log('PCç”¨ãƒ–ãƒ¬ãƒ¼ã‚¯ãƒã‚¤ãƒ³ãƒˆç”¨å‡¦ç†');
  } else {
    // 768pxæœªæº€
    console.log('SPç”¨ãƒ–ãƒ¬ãƒ¼ã‚¯ãƒã‚¤ãƒ³ãƒˆç”¨å‡¦ç†');
  }
};

// ãƒªã‚¹ãƒŠãƒ¼ç™»éŒ²
window.addEventListener('resize', listener);

// åˆæœŸåŒ–å‡¦ç†
listener();
```

ã“ã®æ–¹æ³•ã¯ã€ãƒªã‚µã‚¤ã‚ºã®åº¦ã«ã‚´ãƒªã‚´ãƒª listener é–¢æ•°ãŒå®Ÿè¡Œã•ã‚Œã‚‹ã®ã§ã€ã§ãã‚Œã°ã‚„ã‚ãŸã„ã¨è€ƒãˆã¦ã„ã¾ã—ãŸ...ğŸ’£

## window.matchMedia ã‚’ã¨ã‚Šã‚ãˆãšä½¿ã£ã¦ã¿ãŸæ–¹æ³•

ä»¥å‰ã€ä½•ã‹ã®è¨˜äº‹ã§ [window.matchMedia](https://developer.mozilla.org/ja/docs/Web/API/Window/matchMedia) ã‚’è¦‹ã‹ã‘ãŸã¨ãã¯ã€ä»¥ä¸‹ã®ã‚ˆã†ã« CSS ã®ãƒ¡ãƒ‡ã‚£ã‚¢ã‚¯ã‚¨ãƒªã¨åŒã˜è¨˜æ³•ã§æ›¸ã‘ã‚‹ã®ã§ã€ã„ã„ãªãƒ¼ãã‚‰ã„ã®èªè­˜ã§ã—ãŸã€‚

```javascript:window.matchMediaã‚’ã¨ã‚Šã‚ãˆãšä½¿ã£ã¦ã¿ãŸæ–¹æ³•
/**
 * ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼
 */
const listener = () => {
  // ãƒªã‚µã‚¤ã‚ºæ™‚ã«è¡Œã†å‡¦ç†
  if (window.matchMedia('(min-width: 768px)').matches) {
    // 768pxä»¥ä¸Š
    console.log('PCç”¨ãƒ–ãƒ¬ãƒ¼ã‚¯ãƒã‚¤ãƒ³ãƒˆç”¨å‡¦ç†');
  } else {
    // 768pxæœªæº€
    console.log('SPç”¨ãƒ–ãƒ¬ãƒ¼ã‚¯ãƒã‚¤ãƒ³ãƒˆç”¨å‡¦ç†');
  }
};

// ãƒªã‚¹ãƒŠãƒ¼ç™»éŒ²
window.addEventListener('resize', listener);

// åˆæœŸåŒ–å‡¦ç†
listener();
```

~~ã“ã‚Œãªã‚‰ `(orientation: portrait)` ãªã©ãƒ‡ãƒã‚¤ã‚¹ã®å‘ãã®åˆ¤å®šã‚‚ã§ãã¾ã™ãŒã€ã‚ã‚“ã¾ã‚Šãã†ã„ã†è¤‡é›‘ãªãƒ¡ãƒ‡ã‚£ã‚¢ã‚¯ã‚¨ãƒªæ›¸ãæ©Ÿä¼šã‚‚ãªãã€ã“ã‚Œãªã‚‰åˆ¥ã«ç½®ãæ›ãˆã‚‹æ„å‘³ã‚‚è–„ã„ãªãƒ¼ã¨ ğŸ˜‡~~

## window.matchMedia ã‚’ã¡ã‚ƒã‚“ã¨ä½¿ã£ãŸæ–¹æ³•

å…ˆæ—¥ã¨ã‚ã‚‹ OSS ã® issue ã‚’è¦‹ã¦ã„ã‚‹ã¨ãã«ä»¥ä¸‹ã®ã‚ˆã†ãª`window.matchMedia`ã®ä½¿ã„æ–¹ã‚’è¦‹ã¤ã‘ã¾ã—ãŸ ğŸ’¡

```javascript:window.matchMediaã‚’ã¡ã‚ƒã‚“ã¨ä½¿ã£ãŸæ–¹æ³•
const mediaQueryList = window.matchMedia("(max-width:767px)");

/**
 * ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼
 */
const listener = (event) => {
  // ãƒªã‚µã‚¤ã‚ºæ™‚ã«è¡Œã†å‡¦ç†
  if (event.matches) {
    // 768pxä»¥ä¸Š
    console.log('PCç”¨ãƒ–ãƒ¬ãƒ¼ã‚¯ãƒã‚¤ãƒ³ãƒˆç”¨å‡¦ç†');
  } else {
    // 768pxæœªæº€
    console.log('SPç”¨ãƒ–ãƒ¬ãƒ¼ã‚¯ãƒã‚¤ãƒ³ãƒˆç”¨å‡¦ç†');
  }
};

// ãƒªã‚¹ãƒŠãƒ¼ç™»éŒ²
// mediaQueryList.addListener(listener); // @deprecated
mediaQueryList.addEventListener("change", listener);

// åˆæœŸåŒ–å‡¦ç†
listener(mediaQueryList);
```

listener é–¢æ•°ãŒå®Ÿè¡Œã•ã‚Œã‚‹ã®ã¯ã€ãƒ–ãƒ¬ãƒ¼ã‚¯ãƒã‚¤ãƒ³ãƒˆãŒåˆ‡ã‚Šæ›¿ã‚ã£ãŸã‚¿ã‚¤ãƒŸãƒ³ã‚°ã®ã ã‘ãªã®ã§ã€
resize ã®ç›£è¦–ã¨æ¯”ã¹ã¦ç„¡é§„ã« listener é–¢æ•°ãŒå®Ÿè¡Œã•ã‚Œãªããªã‚Šã¾ã™ ğŸ¤—ğŸ¤—ğŸ¤—

ã“ã®ä½¿ã„æ–¹ãŒ MDN ã®ã‚µãƒ³ãƒ—ãƒ«ã«è¼‰ã£ã¦ã„ãªã„ã®ã‹ãªã¨æ€ã£ã¦ã„ãŸã‚‰`matchMedia`ã®æˆ»ã‚Šå€¤ã®[MediaQueryList](https://developer.mozilla.org/ja/docs/Web/API/MediaQueryList)ã®ã»ã†ã«æ›¸ã„ã¦ã‚ã‚Šã¾ã—ãŸã€‚ã€‚ã€‚
~~ãã“ã¾ã§ã¯ã€ãªã‹ãªã‹è¦‹ãªã„...~~
