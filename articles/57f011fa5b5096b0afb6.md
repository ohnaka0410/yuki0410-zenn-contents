---
title: "Navigation Architecture Componentã§ç¾åœ¨ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãªFragmentã‹åˆ¤å®šã™ã‚‹æ–¹æ³•"
emoji: "ğŸ“Œ"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["Android","Kotlin","navigation","ArchitectureComponents"]
published: true
---
Navigation Architecture Componentã§ã‚¤ãƒ™ãƒ³ãƒˆã®ä¸­ã§ç”»é¢é·ç§»å‡¦ç†è¡Œã†å ´åˆã«ã€
ãƒ€ã‚¤ã‚¢ãƒ­ã‚°ã®è£å´ã®FragmentãŒåå¿œã—ã¦ã—ã¾ã„ã€backStackãŒãŠã‹ã—ããªã‚‹ã“ã¨ãŒé »ç™ºã—ãŸãŸã‚ã€
è‡ªèº«ãŒã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãªFragmentã‹åˆ¤å®šã™ã‚‹ãŸã‚ã«ã€extensionã‚’æ›¸ã„ãŸã®ã§ãƒ¡ãƒ¢ã—ã¦ãŠãã¾ã™ã€‚

## ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰

```Kotlin:Fragment.kt
package com.example.extension

import androidx.fragment.app.Fragment
import androidx.navigation.NavDestination
import androidx.navigation.fragment.DialogFragmentNavigator
import androidx.navigation.fragment.FragmentNavigator
import androidx.navigation.fragment.findNavController

/**
 * isCurrentDestination
 */
fun Fragment.isCurrentDestination(): Boolean {
  val currentDestination: NavDestination = findNavController().currentDestination ?: return false
  when (currentDestination) {
    is DialogFragmentNavigator.Destination -> {
      if (currentDestination.className == this.javaClass.name) {
        return true
      }
    }
    is FragmentNavigator.Destination -> {
      if (currentDestination.className == this.javaClass.name) {
        return true
      }
    }
  }
  return false
}

```

## ä½¿ç”¨ä¾‹
```Kotlin
  /**
   * æˆ»ã‚‹ãƒœã‚¿ãƒ³ã‚¯ãƒªãƒƒã‚¯å‡¦ç†
   */
  fun onClickBackButton() {
    if (!isCurrentDestination()) {
      return
    }
    findNavController().popBackStack()
  }
```
