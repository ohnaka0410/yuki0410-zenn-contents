---
title: "é™çš„ã‚µã‚¤ãƒˆã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ãƒ¼ 11tyeleventyã§PostCSSãŒä½¿ã„ãŸã„"
emoji: "ğŸ’¡"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["postcss", "11ty", "eleventy"]
published: true
publication_name: "no4_dev"
---

## ã¯ã˜ã‚ã«

- [11ty/eleventy](https://www.11ty.dev/)ã¯[zachleat](https://twitter.com/zachleat)æ°ã«ã‚ˆã£ã¦åˆ¶ä½œã•ã„ã‚Œã¦ã„ã‚‹é™çš„ã‚µã‚¤ãƒˆã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ãƒ¼(SSG)
- ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ä»¥ä¸‹ã®è¨€èªã«å¯¾å¿œã—ã¦ã„ã¾ã™ã€‚
  - HTMLï¼ˆ.htmlï¼‰
  - Liquidï¼ˆ.liquidï¼‰
  - EJSï¼ˆ.ejsï¼‰
  - Markdownï¼ˆ.mdï¼‰
  - Handlebarsï¼ˆ.hbsï¼‰
  - Mustacheï¼ˆ.mustacheï¼‰
  - Hamlï¼ˆ.hamlï¼‰
  - Pugï¼ˆ.pugï¼‰
  - Nunjucksï¼ˆ.njkï¼‰
  - JavaScriptï¼ˆ.11ty.jsï¼‰

SSG ã¨ã„ãˆã°ã€[Next.js](https://nextjs.org/)ã‚„ã€[NuxtJS](https://ja.nuxtjs.org/)ã€[Gatsby](https://www.gatsbyjs.com/)ãªã©ãŒæœ‰åã‹ã¨ã¯æ€ã„ã¾ã™ãŒã€å‡ºåŠ›ã•ã‚Œã‚‹ã‚³ãƒ¼ãƒ‰ã‚’ç›´æ¥ç·¨é›†ã—ã¦ä¿å®ˆã€ã€ãªã©ã®è¦ä»¶ã«ã¯è€ãˆã‚‰ã‚Œãªã„ãŸã‚ã€å‡ºåŠ›ã•ã‚Œã‚‹ã‚³ãƒ¼ãƒ‰ã‚’ç´°ã‹ãåˆ¶å¾¡ã§ãã‚‹ 11ty ã‚’è§¦ã£ã¦ã„ã“ã†ã¨æ€ã„ã¾ã™ã€‚
ãŸã ã€11ty ã¯ HTML ã®ç”Ÿæˆã«ç‰¹åŒ–ã—ã¦ã„ã‚‹ãŸã‚ã€PostCSS ã‚’åˆ©ç”¨ã™ã‚‹ãŸã‚ã«ã¯ã€è‡ªå‰ã§ç’°å¢ƒã‚’ä½œã£ã¦ã„ãå¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚
â€»ä»Šå›ã¯æœ€ä½é™ã® 11ty ã¨ PostCSS ã‚’é€£æºã™ã‚‹ãŸã‚ã ã‘ã®è¨­å®šã‚’æ›¸ã„ã¦ã„ãã¾ã™ã€‚

## ãƒ•ã‚¡ã‚¤ãƒ«&ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆ

```
root/
ã€€â”œ dist/ã€€ã€€=>ã€€å‡ºåŠ›ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª
ã€€â”œ src/ã€€ã€€=>ã€€å…¥åŠ›ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª
ã€€â”‚ã€€â”œ assets/ã€€ã€€=>ã€€ãƒªã‚½ãƒ¼ã‚¹ãƒ•ã‚¡ã‚¤ãƒ«é…ç½®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª
ã€€â”‚ã€€â”‚ã€€â”œ images/ã€€ã€€=>ã€€ç”»åƒãƒªã‚½ãƒ¼ã‚¹ãƒ•ã‚¡ã‚¤ãƒ«é…ç½®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª
ã€€â”‚ã€€â”‚ã€€â”” styles/ã€€ã€€=>ã€€ã‚¹ã‚¿ã‚¤ãƒ«ãƒªã‚½ãƒ¼ã‚¹ãƒ•ã‚¡ã‚¤ãƒ«é…ç½®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª
ã€€â”‚ã€€â”‚ã€€ ã€€â”œ modules/
ã€€â”‚ã€€â”‚ã€€ ã€€â”‚ã€€â”œ _base.pcss
ã€€â”‚ã€€â”‚ã€€ ã€€â”‚ã€€â”œ _header.pcss
ã€€â”‚ã€€â”‚ã€€ ã€€â”‚ã€€â”” _footer.pcss
ã€€â”‚ã€€â”‚ã€€ ã€€â”” style.pcss
ã€€â”‚ã€€â”œ components/ã€€ã€€=>ã€€ãƒ‘ãƒ¼ãƒ„é…ç½®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª
ã€€â”‚ã€€â”‚ã€€â”œ header.hbs
ã€€â”‚ã€€â”‚ã€€â”” footer.hbs
ã€€â”‚ã€€â”œ data/ã€€ã€€=>ã€€ãƒ‡ãƒ¼ã‚¿é…ç½®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª
ã€€â”‚ã€€â”œ layouts/ã€€ã€€=>ã€€ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆé…ç½®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª
ã€€â”‚ã€€â”‚ã€€â”” default.hbs
ã€€â”‚ã€€â”” pages/ã€€ã€€=>ã€€ã‚¨ãƒ³ãƒˆãƒªãƒã‚¤ãƒ³ãƒˆé…ç½®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª
ã€€â”‚ã€€ ã€€â”” index.hbs
ã€€â”œ .bs-config.js => BrowserSyncè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«
ã€€â”œ .eleventy.js ã€€=> eleventyè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«
ã€€â”œ .postcssrc.jsã€€ => PostCSSè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«(è©³ç´°ã¯çœç•¥)
ã€€â”œ .stylelintrc.jsã€€ => stylelintè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«(è©³ç´°ã¯çœç•¥)
ã€€â”” package.json
```

## npm ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```sh:console
# package.jsonã®ä½œæˆ
% npm init -y
% npm i -D @11ty/eleventy
# 11tyã«ã‚‚å«ã¾ã‚Œã¦ã„ã¾ã™ãŒã€ä»Šå›ã¯11tyã‚’ãŸã ã®ãƒ“ãƒ«ãƒ€ãƒ¼ã¨ã—ã¦ä½¿ã„ãŸã‹ã£ãŸãŸã‚ã€åˆ¥é€”ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã€‚
% npm i -D browser-sync
# npm-scriptsã§ã‚¿ã‚¹ã‚¯ã®ç›´åˆ—ã€ä¸¦åˆ—å®Ÿè¡Œã™ã‚‹ãŸã‚ã€‚
% npm i -D npm-run-all
% npm i -D postcss
# CLIã‹ã‚‰PostCSSã‚’åˆ©ç”¨ã™ã‚‹ãŸã‚ã€‚
% npm i -D postcss-cli
# CLIã‹ã‚‰ãƒ•ã‚¡ã‚¤ãƒ«ã®å‰Šé™¤ã‚’è¡Œã†ãŸã‚ã€‚
% npm i -D rimraf
# ãƒªãƒ³ã‚¿ãƒ¼
% npm i -D stylelint
```

## è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®ä½œæˆ

### .eleventy.js

```javascript:.eleventy.js
/**
 * Eleventy Configuration
 */
module.exports = (eleventyConfig) => {
  // NOTE:æœ¬å½“ã¯.eleventyignoreã§.pcssã‚’é™¤å¤–ã—ãŸã„ãŒã€11tyã®ãƒã‚°ã®ãŸã‚å‹•ä½œã—ãªã„ã€‚ã€‚ã€‚
  eleventyConfig.addPassthroughCopy({
    // assets
    "src/assets": "assets",
  });

  return {
    dir: {
      // å…¥åŠ›ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª
      // input: ".",
      input: "src/pages",
      // ã‚¤ãƒ³ã‚¯ãƒ«ãƒ¼ãƒ‰ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª
      // includes: "_includes",
      includes: "../components",
      // ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª
      // layouts: "_includes",
      layouts: "../layouts",
      // ã‚°ãƒ­ãƒ¼ãƒãƒ«ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª
      // data: "_data",
      data: "../data",
      // å‡ºåŠ›ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª
      // output: "_site",
      output: "dist",
      // ã‚°ãƒ­ãƒ¼ãƒãƒ«ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚¨ãƒ³ã‚¸ãƒ³
      dataTemplateEngine: false,
      // ãƒãƒ¼ã‚¯ãƒ€ã‚¦ãƒ³ãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚¨ãƒ³ã‚¸ãƒ³
      markdownTemplateEngine: "liquid",
      // HTMLãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚¨ãƒ³ã‚¸ãƒ³
      htmlTemplateEngine: "liquid",
      // ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
      templateFormats: [
        // "html",
        // "liquid",
        // "ejs",
        // "md",
        "hbs",
        // "mustache",
        // "haml",
        // "pug",
        // "njk",
        // "11ty.js",
      ],
    },
  };
};

```

### .bs-config.js

```javascript:.bs-config.js
/**
 * Browser-sync Configuration
 */
module.exports = {
  ui: false,
  files: [
    "dist/**/*.css",
  ],
  server: "dist",
  ghostMode: false,
  open: false,
  notify: false,
};

```

### package.json

```json:package.json(scriptséƒ¨åˆ†ã®ã¿)
{
  "scripts": {
    // ãƒªãƒªãƒ¼ã‚¹ç”¨ãƒ“ãƒ«ãƒ‰
    "build": "run-s clean build::*",
    // ãƒªãƒªãƒ¼ã‚¹ç”¨htmlãƒ“ãƒ«ãƒ‰
    "build::html": "eleventy",
    // ãƒªãƒªãƒ¼ã‚¹ç”¨cssãƒ“ãƒ«ãƒ‰
    "build::css": "postcss \"./src/assets/**/!(_)*.pcss\" --base \"src/assets\" --dir \"dist/assets\" --ext css --no-map",
    // distãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®å‰Šé™¤
    "clean": "rimraf dist",
    "format": "run-s format::css",
    "format::css": "stylelint \"src/assets/**/*.pcss\" --fix",
    // ãƒªãƒ³ã‚¿ãƒ¼å®Ÿè¡Œ
    "lint": "run-s lint::css",
    // CSSãƒªãƒ³ã‚¿ãƒ¼å®Ÿè¡Œ
    "lint::css": "stylelint \"src/assets/**/*.pcss\"",
    // é–‹ç™ºã‚µãƒ¼ãƒèµ·å‹•
    "server": "browser-sync start --config \"./.bs-config.js\"",
    // é–‹ç™ºã‚µãƒ¼ãƒèµ·å‹•
    "start": "run-p watch server",
    // ç›£è¦–
    "watch": "run-p watch::*",
    // HTMLç›£è¦–
    "watch::html": "eleventy --watch",
    // CSSç›£è¦–
    "watch::css": "postcss \"./src/assets/**/!(_)*.pcss\" --base \"src/assets\" --dir \"dist/assets\" --ext css --watch"
  },
}

```

## ä½¿ã„æ–¹

```sh:console
# é–‹ç™ºã‚µãƒ¼ãƒèµ·å‹•
% npm run start
# ãƒªãƒ³ã‚¿ãƒ¼å®Ÿè¡Œ
% npm run lint
# ãƒªãƒ³ã‚¿ãƒ¼ã«ã‚ˆã‚‹ä¿®æ­£ã®å®Ÿè¡Œ
% npm run format
# ãƒªãƒªãƒ¼ã‚¹ç”¨ãƒ“ãƒ«ãƒ‰
% npm run build
```

## æœ€å¾Œã«

- ãƒã‚°ãŒç›´ã£ãŸã‚‰.eleventyignore ã‚’è¿½åŠ äºˆå®šã§ã™ã€‚
- `eleventyConfig.addExtension`ã‚’åˆ©ç”¨ã™ã‚‹ã‹æ‚©ã¿ã¾ã—ãŸãŒã€ãã‚Œã‚’ã‚„ã‚‹ã®ã§ã‚ã‚Œã°ã€gulp ãªã©ã§ã„ã„ã‚“ã˜ã‚ƒãªã„ã‹ã¨æ€ã„ã€ä»Šå›ã¯ã€npm scripts ã‚’ä½¿ã£ã¦åˆ¥ã€…ã§å‡¦ç†ã™ã‚‹ã‚ˆã†ã«ã—ã¾ã—ãŸã€‚
