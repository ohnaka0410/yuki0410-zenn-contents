---
title: "Jestã®ãƒ†ã‚¹ãƒˆã‚‚TypeScriptã§æ›¸ããŸã„"
emoji: "ğŸ’¡"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["TypeScript", "ãƒ†ã‚¹ãƒˆ", "jest"]
published: true
publication_name: "no4_dev"
---

## ã¯ã˜ã‚ã«

ã›ã£ã‹ã TypeScript ã§å‹ã‚»ãƒ¼ãƒ•ãªãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã‚’æ›¸ã„ãŸã®ã§ã€ã©ã†ãœãªã‚‰ãƒ†ã‚¹ãƒˆã‚‚ TypeScript ã§æ›¸ããŸã„ã®ã§ã€ç’°å¢ƒæ§‹ç¯‰æ‰‹é †ã‚’ã¾ã¨ã‚ã¦ãŠãã¾ã™ã€‚
â€» node ã‚„ typescript ã®å°å…¥ã¯å®Œäº†ã—ã¦ã„ã‚‹å‰æã§é€²ã‚ã¦ã„ãã¾ã™ã€‚

## ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```sh:console
# å¿…è¦ãªmoduleã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
npm i -D jest @types/jest ts-jest
```

## è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®ä½œæˆ

```js:tsconfig.jest.json
{
  "extends": "./tsconfig.json",
}

```

â€» ãƒ†ã‚¹ãƒˆç”¨ã« ts-config.json ã®å†…å®¹ã‚’ override ã—ãŸã„å ´åˆãŒã‚ã‚‹ã®ã§ã€‚ãƒ†ã‚¹ãƒˆç”¨åˆ¥ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç”¨æ„ã—ã¦ãŠãã¾ã™ã€‚
ã€€`compilerOptions.jsx`ã ã‘`react-jsx`ã§ä¸Šæ›¸ãã—ãŸã„ã¨ã‹...

```js:jest.config.js
/**
 * Jest Configuration
 */
module.exports = {
  preset: "ts-jest",
  testEnvironment: "jsdom",
  globals: {
    "ts-jest": {
      tsconfig: "tsconfig.jest.json",
    },
  },
};

```

## ts-config ã§ paths ã‚’ã‚«ã‚¹ã‚¿ãƒ ã—ã¦ã„ã‚‹å ´åˆ

ãã®ã¾ã¾ã ã¨ import ã®ãƒ‘ã‚¹è§£æ±ºãŒã§ããšã€ã‚¨ãƒ©ãƒ¼ã¨ãªã‚‹ãŸã‚ã€è¿½åŠ ã§è¨­å®šãŒå¿…è¦ã§ã™ã€‚

```sh:console
# è¿½åŠ moduleã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
npm i -D jsonc-parser
```

é€šå¸¸ json ãƒ•ã‚¡ã‚¤ãƒ«ã¯ require ã§èª­ã¿è¾¼ã‚ã¾ã™ãŒã€ã‚³ãƒ¡ãƒ³ãƒˆæœ‰ã® json(jsonc?)ã¯ require ã§èª­ã¿è¾¼ã‚€ã¨ã‚¨ãƒ©ãƒ¼ã¨ãªã‚‹ãŸã‚ã€ãƒ­ãƒ¼ãƒ‰ç”¨ã® module ã‚’ä½¿ã„ã¾ã™ã€‚

```js:jest.config.js
/**
 * Jest Configuration
 */
const { pathsToModuleNameMapper } = require("ts-jest/utils");
const { readFileSync } = require("fs");
const { parse } = require("jsonc-parser");
// extendsã‚’è‡ªå‹•çš„ã«è§£æ±ºã—ã¦ãƒãƒ¼ã‚¸ã§ããªã„ãŸã‚ã€compilerOptions.pathsã‚’æ›¸ã„ã¦ã„ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã™ã‚‹
const { compilerOptions } = parse(readFileSync("./tsconfig.json").toString());
const moduleNameMapper = pathsToModuleNameMapper(compilerOptions.paths, { prefix: "<rootDir>/" });

module.exports = {
  preset: "ts-jest",
  testEnvironment: "jsdom",
  moduleNameMapper,
  globals: {
    "ts-jest": {
      tsconfig: "tsconfig.jest.json",
    },
  },
};

```

ä»¥ä¸Šã§ã™ã€‚
